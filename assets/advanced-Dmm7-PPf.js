import{r as p,a as se,j as r,R as _e}from"./client-DvaAtPIX.js";const P={BASE_URL:"/front_7th_chapter3-2/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function me(e){return"init"in e}function Q(e){return!!e.write}function ie(e){return"v"in e||"e"in e}function q(e){if("e"in e)throw e.e;if((P?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v}const W=new WeakMap;function he(e){var t;return H(e)&&!!((t=W.get(e))!=null&&t[0])}function Me(e){const t=W.get(e);t?.[0]&&(t[0]=!1,t[1].forEach(s=>s()))}function G(e,t){let s=W.get(e);if(!s){s=[!0,new Set],W.set(e,s);const n=()=>{s[0]=!1};e.then(n,n)}s[1].add(t)}function H(e){return typeof e?.then=="function"}function fe(e,t,s){if(!s.p.has(e)){s.p.add(e);const n=()=>s.p.delete(e);t.then(n,n)}}function xe(e,t,s){var n;const o=new Set;for(const a of((n=s.get(e))==null?void 0:n.t)||[])s.has(a)&&o.add(a);for(const a of t.p)o.add(a);return o}const Ve=(e,t,...s)=>t.read(...s),Te=(e,t,...s)=>t.write(...s),Pe=(e,t)=>{var s;return(s=t.unstable_onInit)==null?void 0:s.call(t,e)},De=(e,t,s)=>{var n;return(n=t.onMount)==null?void 0:n.call(t,s)},Ee=(e,t)=>{var s;const n=A(e),o=n[0],a=n[6],c=n[9];if((P?"production":void 0)!=="production"&&!t)throw new Error("Atom is undefined or null");let d=o.get(t);return d||(d={d:new Map,p:new Set,n:0},o.set(t,d),(s=a.i)==null||s.call(a,t),c?.(e,t)),d},Ie=e=>{const t=A(e),s=t[1],n=t[3],o=t[4],a=t[5],c=t[6],d=t[13],f=[],i=l=>{try{l()}catch(m){f.push(m)}};do{c.f&&i(c.f);const l=new Set,m=l.add.bind(l);n.forEach(h=>{var u;return(u=s.get(h))==null?void 0:u.l.forEach(m)}),n.clear(),a.forEach(m),a.clear(),o.forEach(m),o.clear(),l.forEach(i),n.size&&d(e)}while(n.size||a.size||o.size);if(f.length)throw new AggregateError(f)},$e=e=>{const t=A(e),s=t[1],n=t[2],o=t[3],a=t[11],c=t[14],d=t[17],f=[],i=new WeakSet,l=new WeakSet,m=Array.from(o);for(;m.length;){const h=m[m.length-1],u=a(e,h);if(l.has(h)){m.pop();continue}if(i.has(h)){if(n.get(h)===u.n)f.push([h,u]);else if((P?"production":void 0)!=="production"&&n.has(h))throw new Error("[Bug] invalidated atom exists");l.add(h),m.pop();continue}i.add(h);for(const x of xe(h,u,s))i.has(x)||m.push(x)}for(let h=f.length-1;h>=0;--h){const[u,x]=f[h];let v=!1;for(const g of x.d.keys())if(g!==u&&o.has(g)){v=!0;break}v&&(c(e,u),d(e,u)),n.delete(u)}},Y=new WeakSet,Fe=(e,t)=>{var s,n;const o=A(e),a=o[1],c=o[2],d=o[3],f=o[6],i=o[7],l=o[11],m=o[12],h=o[13],u=o[14],x=o[16],v=o[17],g=l(e,t);if(ie(g)&&(a.has(t)&&c.get(t)!==g.n||Array.from(g.d).every(([w,y])=>u(e,w).n===y)))return g;g.d.clear();let k=!0;function b(){a.has(t)&&(v(e,t),h(e),m(e))}function N(w){var y;if(w===t){const I=l(e,w);if(!ie(I))if(me(w))z(e,w,w.init);else throw new Error("no atom init");return q(I)}const S=u(e,w);try{return q(S)}finally{g.d.set(w,S.n),he(g.v)&&fe(t,g.v,S),(y=a.get(w))==null||y.t.add(t),k||b()}}let T,E;const U={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(P?"production":void 0)!=="production"&&!Q(t)&&console.warn("setSelf function cannot be used with read-only atom"),!E&&Q(t)&&(E=(...w)=>{if((P?"production":void 0)!=="production"&&k&&console.warn("setSelf function cannot be called in sync"),!k)try{return x(e,t,...w)}finally{h(e),m(e)}}),E}},L=g.n;try{(P?"production":void 0)!=="production"&&Y.delete(e);const w=i(e,t,N,U);return(P?"production":void 0)!=="production"&&Y.has(e)&&console.warn("Detected store mutation during atom read. This is not supported."),z(e,t,w),H(w)&&(G(w,()=>T?.abort()),w.then(b,b)),(s=f.r)==null||s.call(f,t),g}catch(w){return delete g.v,g.e=w,++g.n,g}finally{k=!1,L!==g.n&&c.get(t)===L&&(c.set(t,g.n),d.add(t),(n=f.c)==null||n.call(f,t))}},Oe=(e,t)=>{const s=A(e),n=s[1],o=s[2],a=s[11],c=[t];for(;c.length;){const d=c.pop(),f=a(e,d);for(const i of xe(d,f,n)){const l=a(e,i);o.set(i,l.n),c.push(i)}}},ge=(e,t,...s)=>{const n=A(e),o=n[3],a=n[6],c=n[8],d=n[11],f=n[12],i=n[13],l=n[14],m=n[15],h=n[17];let u=!0;const x=g=>q(l(e,g)),v=(g,...k)=>{var b;const N=d(e,g);try{if(g===t){if(!me(g))throw new Error("atom not writable");(P?"production":void 0)!=="production"&&Y.add(e);const T=N.n,E=k[0];z(e,g,E),h(e,g),T!==N.n&&(o.add(g),(b=a.c)==null||b.call(a,g),m(e,g));return}else return ge(e,g,...k)}finally{u||(i(e),f(e))}};try{return c(e,t,x,v,...s)}finally{u=!1}},Be=(e,t)=>{var s;const n=A(e),o=n[1],a=n[3],c=n[6],d=n[11],f=n[15],i=n[18],l=n[19],m=d(e,t),h=o.get(t);if(h&&!he(m.v)){for(const[u,x]of m.d)if(!h.d.has(u)){const v=d(e,u);i(e,u).t.add(t),h.d.add(u),x!==v.n&&(a.add(u),(s=c.c)==null||s.call(c,u),f(e,u))}for(const u of h.d||[])if(!m.d.has(u)){h.d.delete(u);const x=l(e,u);x?.t.delete(t)}}},pe=(e,t)=>{var s;const n=A(e),o=n[1],a=n[4],c=n[6],d=n[10],f=n[11],i=n[12],l=n[13],m=n[14],h=n[16],u=f(e,t);let x=o.get(t);if(!x){m(e,t);for(const v of u.d.keys())pe(e,v).t.add(t);if(x={l:new Set,d:new Set(u.d.keys()),t:new Set},o.set(t,x),(s=c.m)==null||s.call(c,t),Q(t)){const v=()=>{let g=!0;const k=(...b)=>{try{return h(e,t,...b)}finally{g||(l(e),i(e))}};try{const b=d(e,t,k);b&&(x.u=()=>{g=!0;try{b()}finally{g=!1}})}finally{g=!1}};a.add(v)}}return x},Re=(e,t)=>{var s;const n=A(e),o=n[1],a=n[5],c=n[6],d=n[11],f=n[19],i=d(e,t);let l=o.get(t);if(l&&!l.l.size&&!Array.from(l.t).some(m=>{var h;return(h=o.get(m))==null?void 0:h.d.has(t)})){l.u&&a.add(l.u),l=void 0,o.delete(t),(s=c.u)==null||s.call(c,t);for(const m of i.d.keys()){const h=f(e,m);h?.t.delete(t)}return}return l},z=(e,t,s)=>{const n=A(e)[11],o=n(e,t),a="v"in o,c=o.v;if(H(s))for(const d of o.d.keys())fe(t,s,n(e,d));o.v=s,delete o.e,(!a||!Object.is(c,o.v))&&(++o.n,H(c)&&Me(c))},Le=(e,t)=>{const s=A(e)[14];return q(s(e,t))},qe=(e,t,...s)=>{const n=A(e),o=n[12],a=n[13],c=n[16];try{return c(e,t,...s)}finally{a(e),o(e)}},We=(e,t,s)=>{const n=A(e),o=n[12],a=n[18],c=n[19],f=a(e,t).l;return f.add(s),o(e),()=>{f.delete(s),c(e,t),o(e)}},be=new WeakMap,A=e=>{const t=be.get(e);if((P?"production":void 0)!=="production"&&!t)throw new Error("Store must be created by buildStore to read its building blocks");return t};function He(...e){const t={get(n){const o=A(t)[21];return o(t,n)},set(n,...o){const a=A(t)[22];return a(t,n,...o)},sub(n,o){const a=A(t)[23];return a(t,n,o)}},s=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},Ve,Te,Pe,De,Ee,Ie,$e,Fe,Oe,ge,Be,pe,Re,z,Le,qe,We,void 0].map((n,o)=>e[o]||n);return be.set(t,Object.freeze(s)),t}const ye={};let ze=0;function j(e,t){const s=`atom${++ze}`,n={toString(){return(ye?"production":void 0)!=="production"&&this.debugLabel?s+":"+this.debugLabel:s}};return typeof e=="function"?n.read=e:(n.init=e,n.read=Ue,n.write=Je),t&&(n.write=t),n}function Ue(e){return e(this)}function Je(e,t,s){return t(this,typeof s=="function"?s(e(this)):s)}function Qe(){return He()}let B;function Ge(){return B||(B=Qe(),(ye?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=B),globalThis.__JOTAI_DEFAULT_STORE__!==B&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),B}const Ye={},Ze=p.createContext(void 0);function ve(e){return p.useContext(Ze)||Ge()}const Z=e=>typeof e?.then=="function",K=e=>{e.status||(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}))},Ke=se.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(K(e),e)}),J=new WeakMap,le=(e,t)=>{let s=J.get(e);return s||(s=new Promise((n,o)=>{let a=e;const c=i=>l=>{a===i&&n(l)},d=i=>l=>{a===i&&o(l)},f=()=>{try{const i=t();Z(i)?(J.set(i,s),a=i,i.then(c(i),d(i)),G(i,f)):n(i)}catch(i){o(i)}};e.then(c(e),d(e)),G(e,f)}),J.set(e,s)),s};function Xe(e,t){const{delay:s,unstable_promiseStatus:n=!se.use}={},o=ve(),[[a,c,d],f]=p.useReducer(l=>{const m=o.get(e);return Object.is(l[0],m)&&l[1]===o&&l[2]===e?l:[m,o,e]},void 0,()=>[o.get(e),o,e]);let i=a;if((c!==o||d!==e)&&(f(),i=o.get(e)),p.useEffect(()=>{const l=o.sub(e,()=>{if(n)try{const m=o.get(e);Z(m)&&K(le(m,()=>o.get(e)))}catch{}if(typeof s=="number"){setTimeout(f,s);return}f()});return f(),l},[o,e,s,n]),p.useDebugValue(i),Z(i)){const l=le(i,()=>o.get(e));return n&&K(l),Ke(l)}return i}function C(e,t){const s=ve();return p.useCallback((...o)=>{if((Ye?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return s.set(e,...o)},[s,e])}function M(e,t){return[Xe(e),C(e)]}const D=({children:e,variant:t="primary",size:s="md",fullWidth:n=!1,className:o="",...a})=>{const c="rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 inline-flex items-center justify-center",d={primary:"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-900",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-200"},f={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-5 py-2.5 text-lg"},i=n?"w-full":"";return r.jsx("button",{className:`${c} ${d[t]} ${f[s]} ${i} ${o}`,...a,children:e})},de=({children:e,variant:t="primary",size:s="md",className:n=""})=>{const o="text-white rounded inline-flex items-center justify-center",a=s==="sm"?"text-xs px-2 py-0.5":"text-sm px-2.5 py-1",c={primary:"bg-gray-900",success:"bg-green-500",warning:"bg-orange-500",danger:"bg-red-500",info:"bg-blue-500"};return r.jsx("span",{className:`${o} ${a} ${c[t]} ${n}`,children:e})},et=e=>`${e.toLocaleString()}원`,R=e=>`₩${e.toLocaleString()}`,tt=e=>{const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${n}`},X=e=>`${(e*100).toFixed(0)}%`,st=e=>`-${e.toLocaleString()}원`,nt=e=>e.discounts.length===0?0:Math.max(...e.discounts.map(t=>t.rate)),rt=e=>e.discounts.length>0?e.discounts[0]:null,ot=({product:e,remainingStock:t,onAddToCart:s})=>{const n=nt(e),o=rt(e);return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:r.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1"})})}),e.isRecommended&&r.jsx("span",{className:"absolute top-2 right-2",children:r.jsx(de,{variant:"danger",size:"sm",children:"BEST"})}),n>0&&r.jsx("span",{className:"absolute top-2 left-2",children:r.jsxs(de,{variant:"warning",size:"sm",children:["~",X(n)]})})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e.name}),e.description&&r.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-lg font-bold text-gray-900",children:t<=0?"SOLD OUT":R(e.price)}),o&&r.jsxs("p",{className:"text-xs text-gray-500",children:[o.quantity,"개 이상 구매시 할인 ",X(o.rate)]})]}),r.jsx("div",{className:"mb-3",children:t<=5&&t>0?r.jsxs("p",{className:"text-xs text-red-600 font-medium",children:["품절임박! ",t,"개 남음"]}):t>5?r.jsxs("p",{className:"text-xs text-gray-500",children:["재고 ",t,"개"]}):null}),r.jsx(D,{onClick:()=>s(e),disabled:t<=0,variant:"primary",fullWidth:!0,children:t<=0?"품절":"장바구니 담기"})]})]})},ne=({size:e=24,...t}={})=>({width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",...t}),ee=e=>r.jsxs("svg",{...ne(e),children:[r.jsx("path",{d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5"}),r.jsx("path",{d:"M7 13l-2.293 2.293A1 1 0 0 0 5.414 16H17"}),r.jsx("circle",{cx:"17",cy:"18",r:"2"}),r.jsx("circle",{cx:"9",cy:"18",r:"2"})]}),te=e=>r.jsx("svg",{...ne(e),children:r.jsx("path",{d:"M12 5v14M5 12h14"})}),re=e=>r.jsx("svg",{...ne(e),children:r.jsx("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),at=({item:e,discount:t,onUpdateQuantity:s,onRemove:n})=>{const o=e.product.price*e.quantity,a=Math.round(o*(1-t)),c=t>0,d=c?Math.round((1-a/o)*100):0;return r.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:e.product.name}),r.jsx("button",{onClick:()=>n(e.product.id),className:"text-gray-400 hover:text-red-500 ml-2","aria-label":"상품 삭제",children:r.jsx(re,{className:"w-4 h-4","aria-hidden":!0})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>s(e.product.id,e.quantity-1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100","aria-label":"수량 감소",children:"−"}),r.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:e.quantity}),r.jsx("button",{onClick:()=>s(e.product.id,e.quantity+1),className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100","aria-label":"수량 증가",children:"+"})]}),r.jsxs("div",{className:"text-right",children:[c&&r.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",X(d/100)]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:R(a)})]})]})]})},ct=({cart:e,totals:t,coupons:s,selectedCouponCode:n,onUpdateQuantity:o,onRemoveFromCart:a,onSelectCoupon:c,onCompleteOrder:d,getMaxApplicableDiscount:f})=>r.jsxs("div",{className:"sticky top-24 space-y-4",children:[r.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[r.jsx(ee,{className:"w-5 h-5 mr-2","aria-hidden":!0}),"장바구니"]}),e.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ee,{className:"text-gray-300 mx-auto mb-4",size:64,"aria-hidden":!0}),r.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):r.jsx("div",{className:"space-y-3",children:e.map(i=>r.jsx(at,{item:i,discount:f(i),onUpdateQuantity:o,onRemove:a},i.product.id))})]}),e.length>0&&r.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"소계"}),r.jsx("span",{className:"font-medium",children:R(t.subtotal)})]}),t.discountAmount>0&&r.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[r.jsx("span",{children:"할인 금액"}),r.jsx("span",{children:st(t.discountAmount)})]}),r.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t",children:[r.jsx("span",{children:"합계"}),r.jsx("span",{className:"text-blue-600",children:R(t.total)})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{htmlFor:"coupon-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"쿠폰 적용"}),r.jsxs("select",{id:"coupon-select",onChange:i=>c(i.target.value),value:n||"",disabled:e.length===0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[r.jsx("option",{value:"",children:"쿠폰 선택"}),s.map(i=>r.jsxs("option",{value:i.code,children:[i.name," (",i.discountType==="amount"?`${i.discountValue.toLocaleString()}원`:`${i.discountValue}%`,")"]},i.code))]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs(D,{onClick:d,variant:"primary",fullWidth:!0,children:[R(t.total),"원 결제하기"]})})]})]}),je=(e,t)=>{const s=t.some(o=>o.quantity>=10),n=e.product.discounts.reduce((o,a)=>e.quantity>=a.quantity&&a.rate>o?a.rate:o,0);return s?Math.min(n+.05,.5):n},it=(e,t)=>{const s=je(e,t);return Math.round(e.product.price*e.quantity*(1-s))},we=(e,t)=>{const s=e.reduce((a,c)=>a+it(c,e),0);let n=0;t&&(t.discountType==="percentage"?s>=1e4&&(n=Math.round(s*(t.discountValue/100))):n=t.discountValue);const o=Math.max(0,s-n);return{subtotal:s,discountAmount:n,total:o}},lt=()=>`p${Date.now()}`,dt=()=>{const e=new Date,t=tt(e).replace(/-/g,""),s=e.getHours().toString().padStart(2,"0")+e.getMinutes().toString().padStart(2,"0");return`ORD-${t}-${s}`};function ut({items:e,searchTerm:t,searchFields:s=["name","description"]}){return{filteredItems:p.useMemo(()=>{if(!t||t.trim()==="")return e;const o=t.toLowerCase();return e.filter(a=>s.some(c=>{const d=a[c];return typeof d=="string"?d.toLowerCase().includes(o):!1}))},[e,t,s])}}function mt({selectedCoupon:e,coupons:t,cart:s,onCouponInvalid:n,onMinimumAmountWarning:o}){p.useEffect(()=>{e&&!t.some(c=>c.code===e.code)&&n?.()},[t,e,n]),p.useEffect(()=>{s.length===0&&e&&n?.()},[s.length,e,n]);const a=c=>{if(!c)return{isValid:!0};if(s.length===0)return{isValid:!1,errorMessage:"장바구니에 상품을 추가해주세요"};if(c.discountType==="percentage"){const{subtotal:d}=we(s,null);if(d<1e4)return{isValid:!1,warningMessage:"10,000원 이상 구매시 쿠폰을 사용할 수 있습니다!"}}return{isValid:!0}};return p.useEffect(()=>{if(e){const c=a(e);c.warningMessage&&o&&o(c.warningMessage)}},[e,s]),{validateCouponApplicability:a}}function ht({coupons:e,cart:t,onCompleteOrder:s}){const[n,o]=p.useState(null),a=p.useCallback(f=>{const i=e.find(l=>l.code===f)||null;o(i)},[e]),c=p.useCallback(()=>{const f=s();return f.success&&o(null),f},[s]),d=p.useMemo(()=>we(t,n),[t,n]);return{selectedCoupon:n,totals:d,handleCouponChange:a,handleCompleteOrder:c}}const oe={},ft=Symbol((oe?"production":void 0)!=="production"?"RESET":""),Ne=e=>typeof e?.then=="function";function xt(e=()=>{try{return window.localStorage}catch(s){(oe?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(s);return}},t){var s;let n,o;const a={getItem:(f,i)=>{var l,m;const h=x=>{if(x=x||"",n!==x){try{o=JSON.parse(x,t?.reviver)}catch{return i}n=x}return o},u=(m=(l=e())==null?void 0:l.getItem(f))!=null?m:null;return Ne(u)?u.then(h):h(u)},setItem:(f,i)=>{var l;return(l=e())==null?void 0:l.setItem(f,JSON.stringify(i,void 0))},removeItem:f=>{var i;return(i=e())==null?void 0:i.removeItem(f)}},c=f=>(i,l,m)=>f(i,h=>{let u;try{u=JSON.parse(h||"")}catch{u=m}l(u)});let d;try{d=(s=e())==null?void 0:s.subscribe}catch{}return!d&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(d=(f,i)=>{if(!(e()instanceof window.Storage))return()=>{};const l=m=>{m.storageArea===e()&&m.key===f&&i(m.newValue)};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}}),d&&(a.subscribe=c(d)),a}const gt=xt();function ae(e,t,s=gt,n){const o=j(t);return(oe?"production":void 0)!=="production"&&(o.debugPrivate=!0),o.onMount=c=>{c(s.getItem(e,t));let d;return s.subscribe&&(d=s.subscribe(e,c,t)),d},j(c=>c(o),(c,d,f)=>{const i=typeof f=="function"?f(c(o)):f;return i===ft?(d(o,t),s.removeItem(e)):Ne(i)?i.then(l=>(d(o,l),s.setItem(e,l))):(d(o,i),s.setItem(e,i))})}const V=ae("cart",[]),pt=j(e=>e(V).reduce((s,n)=>s+n.quantity,0)),bt=j(null,(e,t,s)=>{const o=e(V).find(a=>a.product.id===s.id);return s.stock-(o?.quantity||0)}),yt=j(null,(e,t,s)=>{const n=e(V),o=n.find(c=>c.product.id===s.id);if(s.stock-(o?.quantity||0)<=0)return{success:!1,error:"재고가 부족합니다!"};if(o){const c=o.quantity+1;if(c>s.stock)return{success:!1,error:`재고는 ${s.stock}개까지만 있습니다.`};t(V,n.map(d=>d.product.id===s.id?{...d,quantity:c}:d))}else t(V,[...n,{product:s,quantity:1}]);return{success:!0,message:"장바구니에 담았습니다"}}),vt=j(null,(e,t,s)=>{const n=e(V);t(V,n.filter(o=>o.product.id!==s))}),jt=j(null,(e,t,{productId:s,newQuantity:n,products:o})=>{const a=e(V);if(n<=0)return t(V,a.filter(f=>f.product.id!==s)),{success:!0};const c=o.find(f=>f.id===s);if(!c)return{success:!1,error:"상품을 찾을 수 없습니다."};const d=c.stock;return n>d?{success:!1,error:`재고는 ${d}개까지만 있습니다.`}:(t(V,a.map(f=>f.product.id===s?{...f,quantity:n}:f)),{success:!0})}),wt=j(null,(e,t,s)=>(t(V,[]),{success:!0,message:`주문이 완료되었습니다. 주문번호: ${s}`})),_=ae("products",[]),Nt=j(null,(e,t,s)=>{const n=e(_);return t(_,[...n,s]),{success:!0,message:"상품이 추가되었습니다."}}),Ct=j(null,(e,t,{productId:s,updates:n})=>{const o=e(_);return t(_,o.map(a=>a.id===s?{...a,...n}:a)),{success:!0,message:"상품이 수정되었습니다."}}),kt=j(null,(e,t,s)=>{const n=e(_);return t(_,n.filter(o=>o.id!==s)),{success:!0,message:"상품이 삭제되었습니다."}});j(null,(e,t,{productId:s,stock:n})=>{const o=e(_);return t(_,o.map(a=>a.id===s?{...a,stock:n}:a)),{success:!0,message:"재고가 수정되었습니다."}});j(null,(e,t,{productId:s,discount:n})=>{const o=e(_);return t(_,o.map(a=>a.id===s?{...a,discounts:[...a.discounts,n]}:a)),{success:!0,message:"할인 규칙이 추가되었습니다."}});j(null,(e,t,{productId:s,discountIndex:n})=>{const o=e(_);return t(_,o.map(a=>a.id===s?{...a,discounts:a.discounts.filter((c,d)=>d!==n)}:a)),{success:!0,message:"할인 규칙이 삭제되었습니다."}});const F=ae("coupons",[]),St=j(null,(e,t,s)=>{const n=e(F);return n.find(a=>a.code===s.code)?{success:!1,error:"이미 존재하는 쿠폰 코드입니다."}:(t(F,[...n,s]),{success:!0,message:"쿠폰이 추가되었습니다."})}),At=j(null,(e,t,s)=>{const n=e(F);return t(F,n.filter(o=>o.code!==s)),{success:!0,message:"쿠폰이 삭제되었습니다."}}),Ce=j(!1),ke=j(""),Se=j(""),O=j([]),Ae=j(null,(e,t,{message:s,type:n})=>{const o=e(O),a={id:`notif-${Date.now()}`,message:s,type:n};t(O,[...o,a]),setTimeout(()=>{t(O,c=>c.filter(d=>d.id!==a.id))},3e3)}),_t=j(null,(e,t,s)=>{const n=e(O);t(O,n.filter(o=>o.id!==s))}),Mt=()=>{const[e]=M(V),[t]=M(_),[s]=M(F),[n]=M(Se),o=C(yt),a=C(vt),c=C(jt),d=C(wt),f=C(bt),i=C(Ae),{selectedCoupon:l,totals:m,handleCouponChange:h,handleCompleteOrder:u}=ht({coupons:s,cart:e,onCompleteOrder:()=>{const b=dt(),N=d(b);return N.message&&i({message:N.message,type:"success"}),N}}),{filteredItems:x}=ut({items:t,searchTerm:n,searchFields:["name","description"]});mt({selectedCoupon:l,coupons:s,cart:e,onCouponInvalid:()=>h(""),onMinimumAmountWarning:b=>i({message:b,type:"warning"})});const v=b=>{const N=o(b);N.error?i({message:N.error,type:"error"}):N.message&&i({message:N.message,type:"success"})},g=(b,N)=>{const T=c({productId:b,newQuantity:N,products:t});T.error&&i({message:T.error,type:"error"})},k=()=>{u()};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-3",children:r.jsxs("section",{children:[r.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),r.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),x.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsxs("p",{className:"text-gray-500",children:['"',n,'"에 대한 검색 결과가 없습니다.']})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(b=>r.jsx(ot,{product:b,remainingStock:f(b),onAddToCart:v},b.id))})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(ct,{cart:e,totals:m,coupons:s,selectedCouponCode:l?.code||null,onUpdateQuantity:g,onRemoveFromCart:a,onSelectCoupon:h,onCompleteOrder:k,getMaxApplicableDiscount:b=>je(b,e)})})]})},Vt=e=>e.discountType==="amount",Tt=e=>Vt(e)?`${e.discountValue.toLocaleString()}원 할인`:`${e.discountValue}% 할인`,$=({label:e,error:t,className:s="",...n})=>r.jsxs("div",{className:"w-full",children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),r.jsx("input",{className:`w-full px-3 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 ${t?"border-red-500":"border-gray-300"} ${s}`,...n}),t&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:t})]}),Pt=e=>e<0?{isValid:!1,error:"가격은 0보다 커야 합니다"}:{isValid:!0},Dt=e=>e<0?{isValid:!1,error:"재고는 0보다 커야 합니다"}:e>9999?{isValid:!1,error:"재고는 9999개를 초과할 수 없습니다"}:{isValid:!0},Et=e=>!e||e.trim().length===0?{isValid:!1,error:"쿠폰 코드를 입력해주세요"}:/^[A-Z0-9_-]+$/.test(e)?{isValid:!0}:{isValid:!1,error:"쿠폰 코드는 영문 대문자, 숫자, -, _만 사용 가능합니다"},It=e=>!e||e.trim().length===0?{isValid:!1,error:"쿠폰 이름을 입력해주세요"}:{isValid:!0},ue=(e,t)=>e<=0?{isValid:!1,error:"할인값은 0보다 커야 합니다"}:t==="percentage"&&e>100?{isValid:!1,error:"할인율은 100%를 초과할 수 없습니다"}:{isValid:!0};function $t({initialProduct:e,onValidationError:t}={}){const[s,n]=p.useState({name:"",price:0,stock:0,description:"",discounts:[],...e});p.useEffect(()=>{n({name:"",price:0,stock:0,description:"",discounts:[],...e})},[e]);const o=p.useCallback((m,h)=>{(h===""||/^\d+$/.test(h))&&n(u=>({...u,[m]:h===""?0:parseInt(h)}))},[]),a=p.useCallback((m,h)=>{const u=parseInt(h)||0;if(m==="price"){const x=Pt(u);x.isValid||(t?.(x.error),n(v=>({...v,price:0})))}else if(m==="stock"){const x=Dt(u);x.isValid||(t?.(x.error),n(v=>({...v,stock:u>9999?9999:0})))}},[t]),c=p.useCallback((m,h)=>{n(u=>({...u,[m]:h}))},[]),d=p.useCallback(()=>{n(m=>({...m,discounts:[...m.discounts,{quantity:10,rate:.1}]}))},[]),f=p.useCallback(m=>{n(h=>({...h,discounts:h.discounts.filter((u,x)=>x!==m)}))},[]),i=p.useCallback((m,h,u)=>{n(x=>({...x,discounts:x.discounts.map((v,g)=>g===m?{...v,[h]:u}:v)}))},[]),l=p.useCallback(()=>{n({name:"",price:0,stock:0,description:"",discounts:[],...e})},[e]);return{product:s,handleNumberChange:o,handleNumberBlur:a,handleFieldChange:c,addDiscount:d,removeDiscount:f,updateDiscount:i,resetForm:l}}const Ft=({initialProduct:e,onSubmit:t,onCancel:s,addNotification:n,isEditing:o})=>{const{product:a,handleNumberChange:c,handleNumberBlur:d,handleFieldChange:f,addDiscount:i,removeDiscount:l,updateDiscount:m}=$t({initialProduct:e,onValidationError:u=>n(u,"error")}),h=u=>{u.preventDefault(),t(a)};return r.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o?"상품 수정":"새 상품 추가"}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[r.jsx($,{label:"상품명",value:a.name,onChange:u=>f("name",u.target.value),required:!0}),r.jsx($,{label:"설명",value:a.description,onChange:u=>f("description",u.target.value)}),r.jsx($,{label:"가격",type:"text",value:a.price===0?"":a.price,onChange:u=>c("price",u.target.value),onBlur:u=>d("price",u.target.value),placeholder:"숫자만 입력",required:!0}),r.jsx($,{label:"재고",type:"text",value:a.stock===0?"":a.stock,onChange:u=>c("stock",u.target.value),onBlur:u=>d("stock",u.target.value),placeholder:"숫자만 입력",required:!0})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),r.jsxs("div",{className:"space-y-2",children:[a.discounts.map((u,x)=>r.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[r.jsx("input",{type:"number",value:u.quantity,onChange:v=>m(x,"quantity",parseInt(v.target.value)||0),className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),r.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),r.jsx("input",{type:"number",value:u.rate*100,onChange:v=>m(x,"rate",(parseInt(v.target.value)||0)/100),className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),r.jsx("span",{className:"text-sm",children:"% 할인"}),r.jsx("button",{type:"button",onClick:()=>l(x),className:"text-red-600 hover:text-red-800",children:r.jsx(re,{className:"w-4 h-4","aria-hidden":!0})})]},x)),r.jsxs("button",{type:"button",onClick:i,className:"text-sm text-indigo-600 hover:text-indigo-800 inline-flex items-center gap-1",children:[r.jsx(te,{className:"w-4 h-4","aria-hidden":!0}),"할인 추가"]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{type:"button",onClick:s,variant:"secondary",children:"취소"}),r.jsx(D,{type:"submit",variant:"primary",children:o?"수정":"추가"})]})]})})};function Ot({onValidationError:e}={}){const[t,s]=p.useState({name:"",code:"",discountType:"amount",discountValue:0}),n=p.useCallback((l,m)=>{s(h=>({...h,[l]:m}))},[]),o=p.useCallback(l=>{s(m=>({...m,code:l.toUpperCase()}))},[]),a=p.useCallback(l=>{s(m=>({...m,discountType:l}))},[]),c=p.useCallback(l=>{(l===""||/^\d+$/.test(l))&&s(m=>({...m,discountValue:l===""?0:parseInt(l)}))},[]),d=p.useCallback(l=>{const m=parseInt(l)||0,h=ue(m,t.discountType);h.isValid||(e?.(h.error),t.discountType==="percentage"?s(u=>({...u,discountValue:m>100?100:0})):s(u=>({...u,discountValue:m>1e5?1e5:0})))},[t.discountType,e]),f=p.useCallback(()=>{const l=[],m=It(t.name);m.isValid||l.push(m.error);const h=Et(t.code);h.isValid||l.push(h.error);const u=ue(t.discountValue,t.discountType);return u.isValid||l.push(u.error),{isValid:l.length===0,errors:l}},[t]),i=p.useCallback(()=>{s({name:"",code:"",discountType:"amount",discountValue:0})},[]);return{coupon:t,handleFieldChange:n,handleCodeChange:o,handleDiscountTypeChange:a,handleValueChange:c,handleValueBlur:d,validateForm:f,resetForm:i}}const Bt=({onSubmit:e,onCancel:t,addNotification:s})=>{const{coupon:n,handleFieldChange:o,handleCodeChange:a,handleDiscountTypeChange:c,handleValueChange:d,handleValueBlur:f,validateForm:i,resetForm:l}=Ot({onValidationError:h=>s(h,"error")}),m=h=>{h.preventDefault();const u=i();if(!u.isValid){u.errors.forEach(x=>s(x,"error"));return}e(n),l()};return r.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),r.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsx($,{label:"쿠폰명",value:n.name,onChange:h=>o("name",h.target.value),placeholder:"신규 가입 쿠폰",className:"text-sm",required:!0}),r.jsx($,{label:"쿠폰 코드",value:n.code,onChange:h=>a(h.target.value),placeholder:"WELCOME2024",className:"text-sm font-mono",required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"할인 타입"}),r.jsxs("select",{value:n.discountType,onChange:h=>c(h.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border text-sm",children:[r.jsx("option",{value:"amount",children:"정액 할인"}),r.jsx("option",{value:"percentage",children:"정률 할인"})]})]}),r.jsx($,{label:n.discountType==="amount"?"할인 금액":"할인율(%)",type:"text",value:n.discountValue===0?"":n.discountValue,onChange:h=>d(h.target.value),onBlur:h=>f(h.target.value),placeholder:n.discountType==="amount"?"5000":"10",className:"text-sm",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(D,{type:"button",onClick:t,variant:"secondary",children:"취소"}),r.jsx(D,{type:"submit",variant:"primary",children:"쿠폰 생성"})]})]})})};function Rt({onAddProduct:e,onUpdateProduct:t,onAddCoupon:s}){const[n,o]=p.useState("products"),[a,c]=p.useState(!1),[d,f]=p.useState(!1),[i,l]=p.useState(null),m=p.useCallback(b=>{l(b),c(!0)},[]),h=p.useCallback(()=>{l(null),c(!0)},[]),u=p.useCallback(b=>{i?t(i.id,b):e(b),l(null),c(!1)},[i,e,t]),x=p.useCallback(()=>{l(null),c(!1)},[]),v=p.useCallback(b=>{s(b),f(!1)},[s]),g=p.useCallback(()=>{f(!1)},[]),k=p.useCallback(()=>{f(b=>!b)},[]);return{activeTab:n,showProductForm:a,showCouponForm:d,editingProduct:i,setActiveTab:o,startEditProduct:m,startAddProduct:h,handleProductSubmit:u,handleProductCancel:x,handleCouponSubmit:v,handleCouponCancel:g,toggleCouponForm:k}}const Lt=()=>{const[e]=M(_),[t]=M(F),s=C(Nt),n=C(Ct),o=C(kt),a=C(St),c=C(At),d=C(Ae),f=y=>{const S=lt(),I={...y,id:S},ce=s(I);ce.message&&d({message:ce.message,type:"success"})},i=(y,S)=>{const I=n({productId:y,updates:S});I.message&&d({message:I.message,type:"success"})},l=y=>{o(y)},m=y=>{const S=a(y);S.error?d({message:S.error,type:"error"}):S.message&&d({message:S.message,type:"success"})},h=y=>{c(y)},{activeTab:u,showProductForm:x,showCouponForm:v,editingProduct:g,setActiveTab:k,startEditProduct:b,startAddProduct:N,handleProductSubmit:T,handleProductCancel:E,handleCouponSubmit:U,handleCouponCancel:L,toggleCouponForm:w}=Rt({onAddProduct:f,onUpdateProduct:i,onAddCoupon:m});return r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsxs("nav",{className:"-mb-px flex space-x-8",children:[r.jsx("button",{onClick:()=>k("products"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="products"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"상품 관리"}),r.jsx("button",{onClick:()=>k("coupons"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${u==="coupons"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"쿠폰 관리"})]})}),u==="products"?r.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),r.jsxs(D,{onClick:N,variant:"primary",size:"sm",children:[r.jsx(te,{className:"w-4 h-4 mr-2","aria-hidden":!0}),"새 상품 추가"]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"설명"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:et(y.price)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.stock>10?"bg-green-100 text-green-800":y.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[y.stock,"개"]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:y.description||"-"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>b(y),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),r.jsx("button",{onClick:()=>l(y.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},y.id))})]})}),x&&r.jsx(Ft,{initialProduct:g||void 0,onSubmit:T,onCancel:E,addNotification:(y,S)=>d({message:y,type:S}),isEditing:!!g})]}):r.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(y=>r.jsx("div",{className:"relative bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-4 border border-indigo-200",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:y.name}),r.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:y.code}),r.jsx("div",{className:"mt-2",children:r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:Tt(y)})})]}),r.jsx("button",{onClick:()=>h(y.code),className:"text-gray-400 hover:text-red-600 transition-colors",children:r.jsx(re,{className:"w-5 h-5","aria-hidden":!0})})]})},y.code)),r.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:r.jsxs(D,{onClick:w,variant:"ghost",className:"flex-col h-auto",children:[r.jsx(te,{className:"w-8 h-8","aria-hidden":!0}),r.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),v&&r.jsx(Bt,{onSubmit:U,onCancel:L,addNotification:(y,S)=>d({message:y,type:S})})]})]})]})},qt=({notifications:e,onRemove:t})=>r.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:e.map(s=>r.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${s.type==="error"?"bg-red-600":s.type==="warning"?"bg-yellow-600":"bg-green-600"}`,children:[r.jsx("span",{className:"mr-2",children:s.message}),r.jsx("button",{onClick:()=>t(s.id),className:"text-white hover:text-gray-200","aria-label":"알림 닫기",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s.id))}),Wt=()=>{const[e,t]=M(Ce),[s,n]=M(ke),[o]=M(V),[a]=M(pt);return r.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"SHOP"}),!e&&r.jsx("div",{className:"ml-8 flex-1 max-w-md",children:r.jsx("input",{type:"text",value:s,onChange:c=>n(c.target.value),placeholder:"상품 검색...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})})]}),r.jsxs("nav",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>t(!e),className:`px-3 py-1.5 text-sm rounded transition-colors ${e?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:e?"쇼핑몰로 돌아가기":"관리자 페이지로"}),!e&&r.jsxs("div",{className:"relative",children:[r.jsx(ee,{className:"w-6 h-6 text-gray-700","aria-hidden":!0}),o.length>0&&r.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a})]})]})]})})})};function Ht(e,t){const[s,n]=p.useState(e);return p.useEffect(()=>{const o=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(o)}},[e,t]),s}const zt=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}],Ut=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],Jt=()=>{const[e,t]=M(Ce),[s,n]=M(ke),[o,a]=M(O),c=C(_),d=C(F),f=C(Se),i=C(_t),l=Ht(s,500);return p.useEffect(()=>{const m=localStorage.getItem("products"),h=localStorage.getItem("coupons");m||c(zt),h||d(Ut),t(!1),n(""),a([])},[]),p.useEffect(()=>{f(l)},[l,f]),r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.length>0&&r.jsx(qt,{notifications:o,onRemove:m=>i(m)}),r.jsx(Wt,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:e?r.jsx(Lt,{}):r.jsx(Mt,{})})]})};_e.createRoot(document.getElementById("root")).render(r.jsx(se.StrictMode,{children:r.jsx(Jt,{})}));
